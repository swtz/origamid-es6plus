// ANOTAÇÕES | ORIGAMID - ES6+ | 09 Regular Expression

// AULA 0904 | Methods pt2

// .match()
String.prototype.match(RegExp);
const frase = 'JavaScript, TypeScript, CoffeeScript, Java';

const regexp = /\w+/g;
// com a flag 'g', .match() retorna uma Array com TODAS as ocorrências;
// sem a flag 'g', .match() retorna um objeto bem parecido com os métodos
// .exec()/.test(), ou seja, retorna o resultado da PRIMEIRA ocorrência.
// Se não houver NENHUMA ocorrência, retorna 'null'.

const results = frase.match(regexp);
console.log(results);


// .split()
String.prototype.split(RegExp); // -> string[]
// O método .split() também aceita expressões regulares.
// É sempre importante lembrar que esse método remove o
// charset que o regex selecionou e coloca "o restante"
// numa array.


// .replace()
String.prototype.replace(RegExp, String); // -> String
// O arg1 do método .replace() aceita as variáveis 'regex'
// que são geradas por meio do uso do 'grupo de captura'.
// Exemplo:
const email1 = `
empresa@email.com
contato@email.com
suporte@email.com
`;
const regexp1 = /(\w+@)[\w.]+/g;
const result1 = email1.replace(regexp1, '$1gmail.com');

// .replace w/ callbackFn
String.prototype.replace(RegExp, (...args) => String);
// O retorno da callbackFn será a substituição dos valores selecionados
// pela 'regex'.

// ...args || (capturaGeral, capturaN, index, stringGeral) => {};

// arguments || (capturaGeral, capturaN, index, stringGeral) => {arguments};
// Também funciona, porém '...args' possibilita o uso do prototype de Array
// enquanto 'arguments' é um objeto iterável.

// Exemplo:
const email = `
empresa@email.com
contato@email.com
suporte@email.com
financeiro@prefeiturabalneariogaivota.sc.gov.br
`;

const regexp2 = /(\w+)(@[\w.]+)/g;

const result = email.replace(regexp2, (...args) => {
  const grupo1 = args[1];
  const grupo2 = args[2];
  const emailPattern = '@prefeiturabalneariogaivota.sc.gov.br';
  if (grupo2 !== emailPattern) {
    return `${grupo1}${emailPattern}`;
  };
  return args[0]; // capturaGeral, ou seja, não caiu na condicional
});
console.log(result);
