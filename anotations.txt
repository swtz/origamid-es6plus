// ANOTAÇÕES | ORIGAMID - ES6+ | 06 Async JS

// AULA 0603 | Fetch API

// fetch() | permite fazer http requests
// retorna uma Promise, ou seja, é possível encadear
// com .then
// o arg0 da callbackFn é um special object chamado
// 'response'. Esse objeto possui propriedades próprias

// É importante prestar atenção que o fetch() faz
// apenas requisições http, ou seja, outros protocolos não
// são suportados. Tem que ao menor ter um servidor local para
// usar essa API

const doc = fetch('https://viacep.com.br/ws/01001000/json/'); // retorna uma Promise
doc.then(response => { // response é o special object Response
  return response.text() // também retorna uma Promise
}).then(body => {
  const content = document.querySelector('.content'); // seleciona um HTMLElement
  content.innerText = body; // insere o texto do arquivo no texto do html
})

response.text() // retorna o json
response.json() // retorna um objeto javascript

// O método .text() é muito útil ao lidar com arquivos de texto tais como
// json, css, html, entre outro
// por exemplo, é possível pegar uma página html inteira, aplicar o método .text()
// é inserir em uma 'div' com HTMLElement.innerHTML. A partir daí, já é
// possível manipulá-la como um DOM qualquer.
